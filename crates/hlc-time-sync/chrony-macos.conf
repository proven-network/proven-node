# Chrony configuration for macOS development/testing

# AWS Time Sync - public endpoint (link-local won't work outside EC2)
# 'prefer' means Chrony will select this unless it's unreachable/unstable
server time.aws.com iburst prefer minpoll 4 maxpoll 6

# Cloudflare NTS - for validation only, never selected as reference
# 'noselect' means monitor for statistics but never sync to it
server time.cloudflare.com iburst nts noselect minpoll 4 maxpoll 6

# Allow stepping the clock for the first 3 updates if offset > 1 second
makestep 1.0 3

# Record drift to adjust clock on restart
driftfile /var/db/chrony/drift

# Log tracking, measurements, and statistics
logdir /var/log/chrony
log tracking measurements statistics

# Command port (default is 323)
cmdport 323

# Also bind to localhost for chronyc
bindcmdaddress 127.0.0.1
bindcmdaddress ::1

# Allow local connections
cmdallow 127.0.0.1
cmdallow ::1
